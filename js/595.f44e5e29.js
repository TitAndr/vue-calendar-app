"use strict";(self["webpackChunkcalendar_app"]=self["webpackChunkcalendar_app"]||[]).push([[595],{4595:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});a(8111),a(7588),a(3579);var l=a(6768),n=a(4232),o=a(5130),i=a(144);const s=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${l}`},r=e=>{const t=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${t}:${a}`},u=(e,t,a)=>{if(!e)return;const l=e.getBoundingClientRect(),n=8;let o=t.x-l.width/2,i=t.y+16;i+l.height+n>window.innerHeight&&(i=t.y-l.height-20),o+l.width>window.innerWidth-n&&(o=window.innerWidth-l.width-n),o<n&&(o=n),a({x:o,y:i})},d={class:"modal-content"},c={class:"input-group"},v={key:0,class:"error"},p={class:"input-group"},m={key:0,class:"error"},k={class:"input-group"},g={key:0,class:"error"},w={class:"input-group"},D={key:0,class:"error"},h={class:"input-group color-picker"},E={class:"modal-footer"},f=["disabled"];var y=(0,l.pM)({__name:"EventModal",props:{show:{type:Boolean},editingEvent:{},position:{}},emits:["save","delete","close"],setup(e,{emit:t}){const a=e,y=t,L={title:"",startDate:"",endDate:"",time:"",notes:"",color:"#3788d8",titleError:"",dateError:""},b=(0,i.KR)({...L}),C=(0,i.KR)(null),$=(0,i.KR)({title:"",startDate:"",endDate:"",time:"",notes:""}),S=(0,i.KR)({x:a.position.x,y:a.position.y}),_=(0,i.EW)(()=>!a.editingEvent),x=e=>(Object.keys($.value).forEach(t=>{const a=e||t;$.value[a]=b.value[a]?"":"This field is required","title"===a&&R(),"startDate"!==a&&"endDate"!==a||B()}),Object.values($.value).some(e=>e)),R=()=>{const{title:e}=b.value;e.length>30&&($.value.title="Maximum 30 characters")},B=()=>{const{startDate:e,endDate:t}=b.value;[e,t].forEach((e,t)=>{const a=new Date(e);if(!e||isNaN(a.getTime())){const e=0===t?"startDate":"endDate";$.value[e]="Not a valid date"}else{const e=0===t?"startDate":"endDate";$.value[e]=""}})},V=()=>{const{title:e,color:t,startDate:l,endDate:n,time:o}=b.value;if(x())return;const i=a.editingEvent?a.editingEvent.id:Date.now().toString();y("save",{id:i,title:e,start:`${l}T${o}:00`,end:`${n}T${o}:00`,backgroundColor:t,borderColor:t}),J()},J=()=>{b.value=L},M=e=>{C.value&&!C.value.contains(e.target)&&y("close")},Q=e=>{"Escape"===e.key&&y("close")};return(0,l.wB)(()=>a.show,e=>{e&&(0,l.dY)().then(()=>{u(C.value,a.position,e=>{S.value=e})})},{immediate:!0}),(0,l.sV)(()=>{const{editingEvent:e}=a;if(e){const{title:t,start:a,end:l,backgroundColor:n}=e;b.value.title=t||"";const o=a?new Date(a):new Date;b.value.startDate=s(new Date(a||"")),b.value.endDate=s(new Date(l||"")),b.value.time=r(o),b.value.color=n||"#3788d8"}else J();window.addEventListener("keydown",Q),document.addEventListener("mousedown",M)}),(0,l.hi)(()=>{window.removeEventListener("keydown",Q),document.removeEventListener("mousedown",M)}),(t,a)=>e.show?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal",ref_key:"modalRef",ref:C,style:(0,n.Tr)({top:`${S.value.y}px`,left:`${S.value.x}px`})},[(0,l.Lk)("button",{class:"close-btn",onClick:a[0]||(a[0]=e=>t.$emit("close"))},"Ã—"),(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>b.value.title=e),placeholder:"event name",class:"input-field",onBlur:a[2]||(a[2]=e=>x("title"))},null,544),[[o.Jo,b.value.title]]),$.value.title?((0,l.uX)(),(0,l.CE)("span",v,(0,n.v_)($.value.title),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",p,[(0,l.bo)((0,l.Lk)("input",{type:"date",placeholder:"event start date","onUpdate:modelValue":a[3]||(a[3]=e=>b.value.startDate=e),class:"input-field",onBlur:a[4]||(a[4]=e=>x("startDate"))},null,544),[[o.Jo,b.value.startDate]]),$.value.startDate?((0,l.uX)(),(0,l.CE)("span",m,(0,n.v_)($.value.startDate),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",k,[(0,l.bo)((0,l.Lk)("input",{type:"time",placeholder:"event time","onUpdate:modelValue":a[5]||(a[5]=e=>b.value.time=e),class:"input-field",onBlur:a[6]||(a[6]=e=>x("time"))},null,544),[[o.Jo,b.value.time]]),$.value.time?((0,l.uX)(),(0,l.CE)("span",g,(0,n.v_)($.value.time),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{placeholder:"notes","onUpdate:modelValue":a[7]||(a[7]=e=>b.value.notes=e),class:"input-field",onBlur:a[8]||(a[8]=e=>x("notes"))},null,544),[[o.Jo,b.value.notes]]),$.value.notes?((0,l.uX)(),(0,l.CE)("span",D,(0,n.v_)($.value.notes),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",h,[(0,l.bo)((0,l.Lk)("input",{type:"color","onUpdate:modelValue":a[9]||(a[9]=e=>b.value.color=e),class:"color-input"},null,512),[[o.Jo,b.value.color]]),a[11]||(a[11]=(0,l.Lk)("span",{class:"color-label"},"Select color",-1))]),(0,l.Lk)("div",E,[(0,l.Lk)("button",{onClick:a[10]||(a[10]=e=>t.$emit("close"))},(0,n.v_)((0,i.R1)(_)?"Cancel":"Discard"),1),(0,l.Lk)("button",{onClick:V,disabled:!!b.value.titleError||!!b.value.dateError},(0,n.v_)((0,i.R1)(_)?"Save":"Edit"),9,f)])])],4)):(0,l.Q3)("",!0)}});const L=y;var b=L}}]);
//# sourceMappingURL=595.f44e5e29.js.map